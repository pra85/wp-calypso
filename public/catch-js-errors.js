function stringifyErrorForUrlParams(error){var simpleObject={};Object.getOwnPropertyNames(error).forEach(function(key){simpleObject[key]=encodeURIComponent(error[key])});return JSON.stringify(simpleObject)}function isLocalStorageNameSupported(){var testKey="test",storage=window.localStorage;try{storage.setItem(testKey,"1");storage.removeItem(testKey);return true}catch(error){return false}}function debounce(fn,delay){var lastCall=Date.now();return function(){var now=Date.now();if(now-lastCall<delay){return}lastCall=now;fn.apply(null,arguments)}}function sendErrorsToApi(message,scriptUrl,lineNumber,columnNumber,error){var xhr=new XMLHttpRequest,params;error=error||new Error(message);if(navigator&&navigator.userAgent){error.userAgent=navigator.userAgent}xhr.open("POST","https://public-api.wordpress.com/rest/v1.1/js-error?http_envelope=1",true);xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded");params="client_id=39911&client_secret=cOaYKdrkgXz8xY7aysv4fU6wL6sK5J8a6ojReEIAPwggsznj4Cb6mW0nffTxtYT8&error="+stringifyErrorForUrlParams(error);xhr.send(params)}if(isLocalStorageNameSupported&&(localStorage.getItem("log-errors")!==undefined&&localStorage.getItem("log-errors")==="true")||Math.random()<=.01){localStorage.setItem("log-errors",true);window.onerror=debounce(function(message,scriptUrl,lineNumber,columnNumber,error){sendErrorsToApi(message,scriptUrl,lineNumber,columnNumber,error)},100)}